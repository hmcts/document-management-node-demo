<div class="grid-row">
  <div class="column-full">
    <h1 class="heading-large" data-hook="dm-listview__heading">List View</h1>

    <!-- Error Message -->
    <div *ngIf="error" class="error-summary" role="alert" aria-labelledby="error-summary-heading-example-1" tabindex="-1">
      <h2 class="heading-medium error-summary-heading" id="error-summary-heading-example-1">
        Something went wrong.
      </h2>
      <p *ngIf="error">{{error}}</p>
      <p *ngIf="error.status">Response status was {{error.status}}.</p>
      <!--<p *ngIf="error.message">{{error.message}}.</p>-->
      <!--<ul class="error-summary-list">-->
        <!--<li><a href="javascript:history.back()">Go Back</a></li>-->
      <!--</ul>-->
    </div>

  </div>
</div>

<!--<div class="grid-row" *ngIf="documents">-->
<div class="grid-row" *ngIf="!error">
  <div class="column-full">
    <table id="documentTable" data-hook="document-list">
      <!-- Table Header -->
      <thead>
      <tr>
        <th></th>
        <th>File Name</th>
        <th>Created By</th>
        <th>Created On</th>
        <th></th>
        <th></th>
        <th></th>
        <th></th>
        <th></th>
      </tr>
      </thead>
      <!-- Table Content -->
      <tbody>
      <tr *ngFor="let docs of documents" data-hook="dm-listview__document">
        <td>
          <a href="{{convertUrlToProxy(docs._links.thumbnail.href)}}?jwt={{jwt}}">
            <img src="{{convertUrlToProxy(docs._links.thumbnail.href)}}?jwt={{jwt}}" width="48">
          </a>
        </td>
        <td class="overflow-ellipsis" data-hook="dm-listview__document__name">
          {{docs.originalDocumentName}}
        </td>
        <td>
          {{docs.createdBy}}
        </td>
        <td>
          {{docs._modifiedOn}}
        </td>
        <td>
          <a href="{{convertUrlToProxy(docs._links.binary.href)}}?jwt={{jwt}}" download="{{docs.originalDocumentName}}">Download</a>
        </td>
        <td>
          <a href="/viewer?url={{docs._links.self.href}}" data-hook="dm-listview__document__view">View</a>
        </td>
        <td>
          <a href="/viewer?url={{docs._links.self.href}}&annotate=true" data-hook="dm-listview__document__annotate">Annotate</a>
        </td>
        <td>
          <input type="button" class="button" value="Delete" (click)="deleteDocument(docs._links.self.href + '?permanent=true')"/>
        </td>
      </tr>
      </tbody>
    </table>
    <!-- Pagination -->
    <div id="documentsPagination" class="pager" *ngIf="dmPage">
      <div class="pager-controls">
        <ul class="pager-items">
          <li>
            <input type="button" [ngClass]="{'button': true}" (click)="firstPage()" value="first">
          </li>
          <li>
            <input type="button" [ngClass]="{'button': true, 'button-disable' : !canPrevPage()}" [disabled]="!canPrevPage()" (click)="prevPage()" value="prev">
          </li>
          <li>
            <input type="button" [ngClass]="{'button': true, 'button-disable' : !canNextPage()}" [disabled]="!canNextPage()" (click)="nextPage()" value="next">
          </li>
          <li>
            <input type="button" [ngClass]="{'button': true}" (click)="lastPage()" value="last">
          </li>
        </ul>
      </div>
      <div class="summary">
        Showing page {{getCurrentPage}} of {{getTotalPage}} of {{dmPage.totalElements}} documents
      </div>
    </div>
  </div>
</div>
